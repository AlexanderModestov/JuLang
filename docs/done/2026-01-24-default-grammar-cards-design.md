# –ö–∞—Ä—Ç–æ—á–∫–∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## –ü—Ä–æ–±–ª–µ–º–∞

–°–µ–π—á–∞—Å –∫–∞—Ä—Ç–æ—á–∫–∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ (3 —à—Ç—É–∫–∏ —á–µ—Ä–µ–∑ AI). –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –≤ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –≥—Ä–∞–º–º–∞—Ç–∏–∫—É" ‚Äî –≤–∏–¥–∏—Ç –ø—É—Å—Ç–æ–π —ç–∫—Ä–∞–Ω "–ù–µ—Ç –∫–∞—Ä—Ç–æ—á–µ–∫ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è". –ù–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è, –∫–∞–∫–∏–µ —Ç–µ–º—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è.

## –†–µ—à–µ–Ω–∏–µ

–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≤—Å–µ—Ö —Ç–µ–º + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ AI-—É–ª—É—á—à–µ–Ω–∏–µ.

### –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç** ‚Äî –ø—Ä–∞–≤–∏–ª–æ + –ø—Ä–∏–º–µ—Ä—ã + —á–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ 30 —Ç–µ–º
2. **–ö–∞—Ä—Ç–æ—á–∫–∏ –ø–æ —É—Ä–æ–≤–Ω—é** ‚Äî —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–∫–∞–∑–∞–Ω –æ—Å–Ω–æ–≤–Ω—ã–º —Å–ø–∏—Å–∫–æ–º, –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —É—Ä–æ–≤–Ω–∏ –≤ —Å–µ–∫—Ü–∏–∏ "–ë–∞–∑–æ–≤—ã–µ"
3. **AI-—É–ª—É—á—à–µ–Ω–∏–µ** ‚Äî –∫–Ω–æ–ø–∫–∞ "–†–∞—Å—à–∏—Ä–∏—Ç—å —á–µ—Ä–µ–∑ AI" –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å –Ω—é–∞–Ω—Å–∞–º–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ grammar-topics.json

```json
{
  "id": "definite-articles",
  "title": "Les articles d√©finis (le, la, les)",
  "titleRu": "–û–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –∞—Ä—Ç–∏–∫–ª–∏",
  "level": "A1",
  "category": "articles",
  "content": {
    "rule": "–û–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –∞—Ä—Ç–∏–∫–ª–∏ le (–º.—Ä.), la (–∂.—Ä.), les (–º–Ω.—á.) —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π, –∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç. –ü–µ—Ä–µ–¥ –≥–ª–∞—Å–Ω–æ–π –∏ h –Ω–µ–º–æ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è l'.",
    "examples": [
      { "fr": "Le livre est sur la table.", "ru": "–ö–Ω–∏–≥–∞ (—ç—Ç–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è) –Ω–∞ —Å—Ç–æ–ª–µ." },
      { "fr": "J'aime les pommes.", "ru": "–Ø –ª—é–±–ª—é —è–±–ª–æ–∫–∏ (–≤ —Ü–µ–ª–æ–º, –∫–∞–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—é)." },
      { "fr": "L'eau est froide.", "ru": "–í–æ–¥–∞ —Ö–æ–ª–æ–¥–Ω–∞—è." }
    ],
    "commonMistakes": [
      "–ü—Ä–æ–ø—É—Å–∫ –∞—Ä—Ç–∏–∫–ª—è –ø–µ—Ä–µ–¥ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º–∏ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏: J'aime ‚àÖ musique ‚Üí J'aime la musique",
      "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ le/la –≤–º–µ—Å—Ç–æ l' –ø–µ—Ä–µ–¥ –≥–ª–∞—Å–Ω–æ–π: le ami ‚Üí l'ami"
    ]
  }
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ GrammarCard

```typescript
interface GrammarCard {
  id: string
  userId: string
  topicId: string              // NEW: —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ–º—É –≤ JSON
  topic: string
  level: FrenchLevel
  explanation: string          // —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ JSON
  examples: GrammarExample[]
  commonMistakes: string[]     // NEW
  isEnhanced: boolean          // NEW: –±—ã–ª–æ –ª–∏ AI-—É–ª—É—á—à–µ–Ω–∏–µ
  enhancedExplanation?: string // NEW: —Ä–µ–∑—É–ª—å—Ç–∞—Ç AI-—É–ª—É—á—à–µ–Ω–∏—è
  // SRS –ø–æ–ª—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  nextReview: Date
  easeFactor: number
  interval: number
  repetitions: number
  createdAt: Date
  practiceStats: PracticeStats
}
```

## UI

### ReviewScreen ‚Äî –Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –≥—Ä–∞–º–º–∞—Ç–∏–∫—É               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üîî –ù–∞ —Å–µ–≥–æ–¥–Ω—è (3)        [–ù–∞—á–∞—Ç—å]  ‚îÇ  ‚Üê —Å–µ–∫—Ü–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üìö –í–∞—à —É—Ä–æ–≤–µ–Ω—å: A2                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ Pass√© compos√© avec avoir    ‚≠ê  ‚îÇ‚îÇ
‚îÇ  ‚îÇ Pass√© compos√© avec √™tre     ‚óã   ‚îÇ‚îÇ
‚îÇ  ‚îÇ L'imparfait                 ‚óã   ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üìñ –ë–∞–∑–æ–≤—ã–µ (A1)            [‚ñº]     ‚îÇ  ‚Üê —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º–∞—è —Å–µ–∫—Ü–∏—è
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ Les articles d√©finis        ‚≠ê  ‚îÇ‚îÇ
‚îÇ  ‚îÇ √ätre et avoir               ‚≠ê  ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–°–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏:**
- ‚óã –ù–æ–≤–∞—è ‚Äî `repetitions === 0`
- ‚≠ê –ò–∑—É—á–∞–µ—Ç—Å—è ‚Äî `repetitions > 0`
- üîÑ –ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é ‚Äî `nextReview <= today`

### CardDetailScreen ‚Äî —ç–∫—Ä–∞–Ω –∫–∞—Ä—Ç–æ—á–∫–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚Üê –ù–∞–∑–∞–¥          A2                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

‚îÇ  Le pass√© compos√© avec avoir        ‚îÇ
‚îÇ  –ü—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è —Å avoir            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üìú –ü—Ä–∞–≤–∏–ª–æ                         ‚îÇ
‚îÇ  –û–±—Ä–∞–∑—É–µ—Ç—Å—è: avoir –≤ pr√©sent +      ‚îÇ
‚îÇ  participe pass√© –≥–ª–∞–≥–æ–ª–∞.           ‚îÇ
‚îÇ  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö       ‚îÇ
‚îÇ  –¥–µ–π—Å—Ç–≤–∏–π –≤ –ø—Ä–æ—à–ª–æ–º.                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üí° –ü—Ä–∏–º–µ—Ä—ã                         ‚îÇ
‚îÇ  J'ai mang√© une pomme.              ‚îÇ
‚îÇ  –Ø —Å—ä–µ–ª —è–±–ª–æ–∫–æ.                     ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ  Elle a fini son travail.           ‚îÇ
‚îÇ  –û–Ω–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞ —Å–≤–æ—é —Ä–∞–±–æ—Ç—É.         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏                   ‚îÇ
‚îÇ  ‚Ä¢ –ü—É—Ç–∞—é—Ç —Å imparfait –¥–ª—è           ‚îÇ
‚îÇ    –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π              ‚îÇ
‚îÇ  ‚Ä¢ –ó–∞–±—ã–≤–∞—é—Ç accord participe        ‚îÇ
‚îÇ    pass√© —Å –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–∏–º COD       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  [‚ú® –†–∞—Å—à–∏—Ä–∏—Ç—å —á–µ—Ä–µ–∑ AI]            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  [–ù–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ]  [–ü—Ä–∞–∫—Ç–∏–∫–∞]      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

–ü–æ—Å–ª–µ AI-—É–ª—É—á—à–µ–Ω–∏—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–µ–∫—Ü–∏—è "üìö –ü–æ–¥—Ä–æ–±–Ω–µ–µ" —Å –Ω—é–∞–Ω—Å–∞–º–∏.

## –õ–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### ensureCardsForLevel

```typescript
async function ensureCardsForLevel(userId: string, level: FrenchLevel): Promise<void> {
  const existingCards = await getUserCards(userId)
  const existingTopicIds = new Set(existingCards.map(c => c.topicId))

  const levelOrder = ['A1', 'A2', 'B1', 'B2', 'C1', 'C2']
  const targetLevels = levelOrder.slice(0, levelOrder.indexOf(level) + 1)

  const topicsToCreate = grammarTopics.topics
    .filter(t => targetLevels.includes(t.level))
    .filter(t => !existingTopicIds.has(t.id))

  for (const topic of topicsToCreate) {
    await createCardFromStatic(userId, topic)
  }
}
```

### createCardFromStatic

```typescript
async function createCardFromStatic(userId: string, topic: GrammarTopic): Promise<GrammarCard> {
  const card: GrammarCard = {
    id: generateId(),
    userId,
    topicId: topic.id,
    topic: topic.title,
    level: topic.level,
    explanation: topic.content.rule,
    examples: topic.content.examples,
    commonMistakes: topic.content.commonMistakes,
    isEnhanced: false,
    nextReview: new Date(),
    easeFactor: 2.5,
    interval: 0,
    repetitions: 0,
    createdAt: new Date(),
    practiceStats: getDefaultPracticeStats(),
  }

  await saveCard(card)
  return card
}
```

### –í—ã–∑–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ ReviewScreen

```typescript
useEffect(() => {
  if (user) {
    ensureCardsForLevel(user.id, user.frenchLevel).then(() => {
      loadCards()
    })
  }
}, [user])
```

## AI-—É–ª—É—á—à–µ–Ω–∏–µ

### enhanceCardExplanation

```typescript
async function enhanceCardExplanation(card: GrammarCard): Promise<string> {
  const prompt = `–†–∞—Å—à–∏—Ä—å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–µ–º—ã "${card.topic}" –¥–ª—è –∏–∑—É—á–∞—é—â–µ–≥–æ —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π –Ω–∞ —É—Ä–æ–≤–Ω–µ ${card.level}.

–ë–∞–∑–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ: ${card.explanation}

–î–æ–±–∞–≤—å:
- –ù—é–∞–Ω—Å—ã —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ø—Ä–∞–≤–∏–ª–∞
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø–æ—Ö–æ–∂–∏–º–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- –ö–æ–Ω—Ç–µ–∫—Å—Ç: –∫–æ–≥–¥–∞ –Ω–æ—Å–∏—Ç–µ–ª–∏ —è–∑—ã–∫–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç–æ

–ü–∏—à–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –ø—Ä–∏–º–µ—Ä—ã –Ω–∞ —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–æ–º —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º. 150-200 —Å–ª–æ–≤.`

  const response = await callAI(prompt)
  return response
}
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

```typescript
await db.grammarCards.update(cardId, {
  isEnhanced: true,
  enhancedExplanation: enhancedText
})
```

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–∞—Ö

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|-----------|
| `src/data/grammar-topics.json` | –î–æ–±–∞–≤–∏—Ç—å `content` –¥–ª—è –≤—Å–µ—Ö 30 —Ç–µ–º |
| `src/types/index.ts` | –î–æ–±–∞–≤–∏—Ç—å `topicId`, `isEnhanced`, `enhancedExplanation`, `commonMistakes` |
| `src/modules/GrammarEngine.ts` | –î–æ–±–∞–≤–∏—Ç—å `ensureCardsForLevel()`, `createCardFromStatic()` |
| `src/modules/AIService.ts` | –î–æ–±–∞–≤–∏—Ç—å `enhanceCardExplanation()` |
| `src/components/GrammarReview/ReviewScreen.tsx` | –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å UI —Å–æ —Å–ø–∏—Å–∫–æ–º —Ç–µ–º |
| `src/components/GrammarReview/CardDetailScreen.tsx` | **–ù–æ–≤—ã–π** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ |
| `src/App.tsx` | –î–æ–±–∞–≤–∏—Ç—å —Ä–æ—É—Ç `/review/:topicId` |
| `src/components/Onboarding/OnboardingFlow.tsx` | –£–¥–∞–ª–∏—Ç—å –≤—ã–∑–æ–≤ `createInitialCards()` |

## –ö–æ–Ω—Ç–µ–Ω—Ç

–ù—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è 30 —Ç–µ–º. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∂–¥–æ–π —Ç–µ–º—ã:

- `rule`: 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, —Å—É—Ç—å –ø—Ä–∞–≤–∏–ª–∞
- `examples`: 2-3 –ø—Ä–∏–º–µ—Ä–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º
- `commonMistakes`: 2 —Ç–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

–ö–æ–Ω—Ç–µ–Ω—Ç –º–æ–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ AI –æ–¥–∏–Ω —Ä–∞–∑ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ JSON.
